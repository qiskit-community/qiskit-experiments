<!DOCTYPE html>
  <html class="no-js" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <title>Curve Analysis: Fitting your data &mdash; Qiskit Experiments 0.5 0.5.4</title>
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="../_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" /><link rel="modulepreload" href="https://cdn.jsdelivr.net/npm/@qiskit/web-components/experimental-bundled-ui-shell.js">
  <script type="module" src="https://cdn.jsdelivr.net/npm/@qiskit/web-components/experimental-bundled-ui-shell.js"></script>
  <style>
    qiskit-ui-shell:not(:defined) {
      display: block;
      margin-bottom: 3.5rem;
    }
  </style>

  <!-- SEGMENT ANALYTICS -->
    <script>
      (function () {
        window._analytics = {
          segment_key: 'ffdYLviQze3kzomaINXNk6NwpY9LlXcw',
          coremetrics: false,
          optimizely: false,
          googleAddServices: false,
          fullStory: false,
          autoPageEventSpa: false,
          autoFormEvents: false,
          autoPageView: false
        }

        window.digitalData = {
          page: {
            pageInfo: {
              productTitle: 'IBM Q Experience',
              analytics: {
                category: 'Qiskit.org'
              }
            }
          }
        }
      }());
    </script>
    <script src="https://cloud.ibm.com/analytics/build/bluemix-analytics.min.js"></script>
    <script>
      (function () {
        'use strict'

        if (!window.bluemixAnalytics || !window.digitalData) { return }

        const category = window.digitalData.page.pageInfo.analytics.category
        const productTitle = window.digitalData.page.pageInfo.productTitle
        const routeName = 'documentation'

        window.bluemixAnalytics.pageEvent(category, routeName, {
          navigationType: 'pushState',
          productTitle: productTitle,
          title: document.title
        })

        window.trackCta = (action) => {
          if (!window.bluemixAnalytics || !window.digitalData) { return }

          const category = window.digitalData.page.pageInfo.analytics.category
          const productTitle = window.digitalData.page.pageInfo.productTitle

          window.bluemixAnalytics.trackEvent('CTA Clicked', {
            productTitle,
            category,
            CTA: action
          })
        }

      }());
    </script></head>
<body class="pytorch-body">
  <!-- UNIFIED TOP MENU -->
  <qiskit-ui-shell variant="hide-account"></qiskit-ui-shell>

   

    <!-- LEFT SIDE BAR -->

    <!-- if translations available, display language dropdown menu -->
    

    <!-- Menu becomes dropdown in mobile view -->
    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <!-- left side bar main content -->
    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
    <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <div class="sidebar">
    <div class="pytorch-left-menu-search">
        <div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search Qiskit Experiments 0.5 Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
    </div>

    <!-- render sidebar from the toctree -->
    
    
        <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">All Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="calibrations.html">Calibrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_processor.html">Data Processor</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Curve Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_experiment.html">Custom Experiments</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howtos/index.html">How-To Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manuals/index.html">Experiment Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apidocs/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Qiskit/qiskit-experiments">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://qiskit.org/documentation/experiments/dev">Development Branch Docs</a></li>
</ul>

    

    <!-- PREVIOUS RELEASES -->
        

    </div>
  </div>
</nav>

<!-- OPTIONAL EXPANDABLE FUNCTIONALITY -->

<script>
    var expandable_rows = document.getElementsByClassName("caption");
    var i;
    var j;
    for (i = 0; i < expandable_rows.length; i++) {
        // add the chevron icon
        expandable_rows[i].classList.add("expandable")
        // expand the dropdown if user is currently on a page included in the dropdown
        var subheadings = expandable_rows[i].nextElementSibling
        if (subheadings.classList.contains("current")) {
            subheadings.style.display = "block"
            subheadings.style.marginLeft = "0.5rem";
            expandable_rows[i].classList.add("open");
        } else {subheadings.style.display = "none"}

        // expand and unexpand dropdown when clicked
        expandable_rows[i].addEventListener("click", function() {
            this.classList.toggle("open");
            var clicked_subheadings = this.nextElementSibling;
            if (clicked_subheadings.style.display === "block") {
            clicked_subheadings.style.display = "none";
            } else {
            clicked_subheadings.style.display = "block";
            }
        });

    }
</script>


<!-- STYLING -->
<script>
    // indent subheadings under captions
    expandable_rows = document.getElementsByClassName("caption");
    var i;
    for (i = 0; i < expandable_rows.length; i++) {
        expandable_rows[i].nextElementSibling.style.marginLeft = "1rem"

        // un-bold subheadings in dropdown
        var subheadings = expandable_rows[i].nextElementSibling
        for (j = 0; j < subheadings.children.length; j++) {
            subheadings.children[j].style.fontWeight = "unset"
        }
    }

    // adjust toctree class name to style external links
    var toc_rows = document.getElementsByClassName("toctree-l1");
    var i;
    for (i = 0; i < toc_rows.length; i++) {
        if (toc_rows[i].children[0].className === "reference external") {
            toc_rows[i].className = "toctree-l1-external"
            }
    }

    // expand and unexpand previous releases dropdown when clicked
    var release_rows = document.getElementsByClassName("sidebar-l1-expandable");
    for (i = 0; i < expandable_rows.length; i++) {
        release_rows[i].addEventListener("click", function() {
            this.classList.toggle("open");
            var clicked_subheadings = this.nextElementSibling;
            if (clicked_subheadings.style.display === "block") {
            clicked_subheadings.style.display = "none";
            } else {
            clicked_subheadings.style.display = "block";
            }
        });
    }
</script>

    <div class="pytorch-container">

      <!-- BREADCRUMB MINI MENU BELOW TOP NAV BAR -->
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          <div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../index.html">
            Qiskit Experiments 0.5 documentation
        </a> &gt;
      </li>

        
          <li><a href="index.html">Tutorials</a> &gt;</li>
        
      <li>Curve Analysis: Fitting your data</li>
    
  </ul>
</div>
        </div>
      </div>

      <!-- MAIN CENTRE CONTENT -->
      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        
        <div class="pytorch-content-left">
          <div class="rst-content">
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  <div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the documentation for the current state of the development branch
of Qiskit Experiments. The documentation or APIs here can change prior to being
released.</p>
</div>
<section id="curve-analysis-fitting-your-data">
<h1>Curve Analysis: Fitting your data<a class="headerlink" href="#curve-analysis-fitting-your-data" title="Permalink to this heading">¶</a></h1>
<p>For most experiments, we are interested in fitting our results to a pre-defined
mathematical model.
The Curve Analysis module provides the analysis base class for a variety of experiments with
a single experimental parameter sweep. Analysis subclasses can override
several class attributes to customize the behavior from data processing to post-processing,
including providing systematic initial guesses for parameters tailored to the experiment.
Here we describe how the Curve Analysis module works and how you can create new
analyses that inherit from the base class.</p>
<section id="curve-analysis-overview">
<span id="id1"></span><h2>Curve Analysis overview<a class="headerlink" href="#curve-analysis-overview" title="Permalink to this heading">¶</a></h2>
<p>The base class <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.CurveAnalysis.html#qiskit_experiments.curve_analysis.CurveAnalysis" title="qiskit_experiments.curve_analysis.CurveAnalysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurveAnalysis</span></code></a> implements the multi-objective optimization on
different sets of experiment results. A single experiment can define sub-experiments
consisting of multiple circuits which are tagged with common metadata,
and curve analysis sorts the experiment results based on the circuit metadata.</p>
<p>This is an example of showing the abstract data structure of a typical curve analysis experiment:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="s2">&quot;experiment&quot;</span>
</span>    <span class="o">-</span> <span class="n">circuits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x1_A</span><span class="p">,</span> <span class="s2">&quot;series_A&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">circuits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x1_B</span><span class="p">,</span> <span class="s2">&quot;series_B&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">circuits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x2_A</span><span class="p">,</span> <span class="s2">&quot;series_A&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">circuits</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x2_B</span><span class="p">,</span> <span class="s2">&quot;series_B&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">circuits</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x3_A</span><span class="p">,</span> <span class="s2">&quot;series_A&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">circuits</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x3_B</span><span class="p">,</span> <span class="s2">&quot;series_B&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="o">...</span>

<span class="hll"><span class="s2">&quot;experiment data&quot;</span>
</span>    <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">(</span><span class="n">y1_A</span><span class="p">,</span> <span class="s2">&quot;series_A&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">(</span><span class="n">y1_B</span><span class="p">,</span> <span class="s2">&quot;series_B&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">(</span><span class="n">y2_A</span><span class="p">,</span> <span class="s2">&quot;series_A&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">(</span><span class="n">y2_B</span><span class="p">,</span> <span class="s2">&quot;series_B&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="p">(</span><span class="n">y3_A</span><span class="p">,</span> <span class="s2">&quot;series_A&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="p">(</span><span class="n">y3_B</span><span class="p">,</span> <span class="s2">&quot;series_B&quot;</span><span class="p">)</span>
    <span class="o">-</span> <span class="o">...</span>

<span class="hll"><span class="s2">&quot;analysis&quot;</span>
</span>    <span class="o">-</span> <span class="s2">&quot;series_A&quot;</span><span class="p">:</span> <span class="n">y_A</span> <span class="o">=</span> <span class="n">f_A</span><span class="p">(</span><span class="n">x_A</span><span class="p">;</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="o">-</span> <span class="s2">&quot;series_B&quot;</span><span class="p">:</span> <span class="n">y_B</span> <span class="o">=</span> <span class="n">f_B</span><span class="p">(</span><span class="n">x_B</span><span class="p">;</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">fixed</span> <span class="n">parameters</span> <span class="p">{</span><span class="n">p1</span><span class="p">:</span> <span class="n">v</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Here the experiment runs two subsets of experiments, namely, series A and series B.
The analysis defines corresponding fit models <span class="math notranslate nohighlight">\(f_A(x_A)\)</span> and <span class="math notranslate nohighlight">\(f_B(x_B)\)</span>.
Data extraction function in the analysis creates two datasets, <span class="math notranslate nohighlight">\((x_A, y_A)\)</span>
for the series A and <span class="math notranslate nohighlight">\((x_B, y_B)\)</span> for the series B, from the experiment data.
Optionally, the curve analysis can fix certain parameters during the fitting.
In this example, <span class="math notranslate nohighlight">\(p_1 = v\)</span> remains unchanged during the fitting.</p>
<p>The curve analysis aims at solving the following optimization problem:</p>
<div class="math notranslate nohighlight">
\[\Theta_{\mbox{opt}} = \arg\min_{\Theta_{\rm fit}} \sigma^{-2} (F(X, \Theta)-Y)^2,\]</div>
<p>where <span class="math notranslate nohighlight">\(F\)</span> is the composite objective function defined on the full experiment data
<span class="math notranslate nohighlight">\((X, Y)\)</span>, where <span class="math notranslate nohighlight">\(X = x_A \oplus x_B\)</span> and <span class="math notranslate nohighlight">\(Y = y_A \oplus y_B\)</span>.
This objective function can be described by two fit functions as follows.</p>
<div class="math notranslate nohighlight">
\[F(X, \Theta) = f_A(x_A, \theta_A) \oplus f_B(x_B, \theta_B).\]</div>
<p>The solver conducts the least square curve fitting against this objective function
and returns the estimated parameters <span class="math notranslate nohighlight">\(\Theta_{\mbox{opt}}\)</span>
that minimize the reduced chi-squared value.
The parameters to be evaluated are <span class="math notranslate nohighlight">\(\Theta = \Theta_{\rm fit} \cup \Theta_{\rm fix}\)</span>,
where <span class="math notranslate nohighlight">\(\Theta_{\rm fit} = \theta_A \cup \theta_B\)</span>.
Since series A and B share the parameters in this example, <span class="math notranslate nohighlight">\(\Theta_{\rm fit} = \{p_0, p_2\}\)</span>,
and the fixed parameters are <span class="math notranslate nohighlight">\(\Theta_{\rm fix} = \{ p_1 \}\)</span> as mentioned.
Thus, <span class="math notranslate nohighlight">\(\Theta = \{ p_0, p_1, p_2 \}\)</span>.</p>
<p>Experiment for each series can perform individual parameter sweep for <span class="math notranslate nohighlight">\(x_A\)</span> and
<span class="math notranslate nohighlight">\(x_B\)</span>, and experiment data yields outcomes <span class="math notranslate nohighlight">\(y_A\)</span> and <span class="math notranslate nohighlight">\(y_B\)</span>, which might
be of different size. Data processing functions may also compute <span class="math notranslate nohighlight">\(\sigma_A\)</span> and
<span class="math notranslate nohighlight">\(\sigma_B\)</span>, which are the uncertainty of outcomes arising from the sampling error
or measurement error.</p>
<p>More specifically, the curve analysis defines the following data model.</p>
<ul class="simple">
<li><p>Model: Definition of a single curve that is a function of a reserved parameter “x”.</p></li>
<li><p>Group: List of models. Fit functions defined under the same group must share the
fit parameters. Fit functions in the group are simultaneously fit to
generate a single fit result.</p></li>
</ul>
<p>Once the group is assigned, a curve analysis instance builds
a proper internal optimization routine.
Finally, the analysis outputs a set of <a class="reference internal" href="../stubs/qiskit_experiments.framework.AnalysisResultData.html#qiskit_experiments.framework.AnalysisResultData" title="qiskit_experiments.framework.AnalysisResultData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnalysisResultData</span></code></a> entries
for important fit outcomes along with a single figure of the fit curves
with the measured data points.</p>
<p>With this base class, a developer can avoid writing boilerplate code in
various curve analyses subclasses and can quickly write up
the analysis code for a particular experiment.</p>
</section>
<section id="defining-new-models">
<span id="curve-analysis-define-group"></span><h2>Defining new models<a class="headerlink" href="#defining-new-models" title="Permalink to this heading">¶</a></h2>
<p>The fit model is defined by the <a class="reference external" href="https://lmfit.github.io/lmfit-py/intro.html">LMFIT</a> <code class="docutils literal notranslate"><span class="pre">Model</span></code>. If you are familiar with this
package, you can skip this section. The LMFIT package manages complicated fit functions
and offers several algorithms to solve non-linear least-square problems. Curve Analysis
delegates the core fitting functionality to this package.</p>
<p>You can intuitively write the definition of a model, as shown below:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">lmfit</span>

<span class="n">models</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">lmfit</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ExpressionModel</span><span class="p">(</span>
        <span class="n">expr</span><span class="o">=</span><span class="s2">&quot;amp * exp(-alpha * x) + base&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;exp_decay&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">x</span></code> is the reserved name to represent a parameter
that is scanned during the experiment. In above example, the fit function
consists of three parameters (<code class="docutils literal notranslate"><span class="pre">amp</span></code>, <code class="docutils literal notranslate"><span class="pre">alpha</span></code>, <code class="docutils literal notranslate"><span class="pre">base</span></code>), and <code class="docutils literal notranslate"><span class="pre">exp</span></code> indicates
a universal function in Python’s math module.
Alternatively, you can take a callable to define the model object.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">lmfit</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">exp_decay</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">amp</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">amp</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">alpha</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">base</span>

<span class="n">models</span> <span class="o">=</span> <span class="p">[</span><span class="n">lmfit</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">exp_decay</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>See the <a class="reference external" href="https://lmfit.github.io/lmfit-py/intro.html">LMFIT</a> documentation for detailed user guide. They also provide preset models.</p>
<p>If the <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.CurveAnalysis.html#qiskit_experiments.curve_analysis.CurveAnalysis" title="qiskit_experiments.curve_analysis.CurveAnalysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurveAnalysis</span></code></a> object is instantiated with multiple models,
it internally builds a cost function to simultaneously minimize the residuals of
all fit functions.
The names of the parameters in the fit function are important since they are used
in the analysis result, and potentially in your experiment database as a fit result.</p>
<p>Here is another example on how to implement a multi-objective optimization task:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">lmfit</span>

<span class="n">models</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">lmfit</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ExpressionModel</span><span class="p">(</span>
        <span class="n">expr</span><span class="o">=</span><span class="s2">&quot;amp * exp(-alpha1 * x) + base&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_experiment1&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">lmfit</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ExpressionModel</span><span class="p">(</span>
        <span class="n">expr</span><span class="o">=</span><span class="s2">&quot;amp * exp(-alpha2 * x) + base&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_experiment2&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>In addition, you need to provide <code class="docutils literal notranslate"><span class="pre">data_subfit_map</span></code> analysis option, which may look like</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_subfit_map</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;my_experiment1&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
    <span class="s2">&quot;my_experiment2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>This option specifies the metadata of your experiment circuit
that is tied to the fit model. If multiple models are provided without this option,
the curve fitter cannot prepare the data for fitting.
In this model, you have four parameters (<code class="docutils literal notranslate"><span class="pre">amp</span></code>, <code class="docutils literal notranslate"><span class="pre">alpha1</span></code>, <code class="docutils literal notranslate"><span class="pre">alpha2</span></code>, <code class="docutils literal notranslate"><span class="pre">base</span></code>)
and the two curves share <code class="docutils literal notranslate"><span class="pre">amp</span></code> (<code class="docutils literal notranslate"><span class="pre">base</span></code>) for the amplitude (baseline) in
the exponential decay function.
Here one should expect the experiment data will have two classes of data with metadata
<code class="docutils literal notranslate"><span class="pre">&quot;tag&quot;:</span> <span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;tag&quot;:</span> <span class="pre">2</span></code> for <code class="docutils literal notranslate"><span class="pre">my_experiment1</span></code> and <code class="docutils literal notranslate"><span class="pre">my_experiment2</span></code>, respectively.</p>
<p>By using this model, you can flexibly set up your fit model. Here is another example:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">lmfit</span>

<span class="n">models</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">lmfit</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ExpressionModel</span><span class="p">(</span>
        <span class="n">expr</span><span class="o">=</span><span class="s2">&quot;amp * cos(2 * pi * freq * x + phi) + base&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_experiment1&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">lmfit</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ExpressionModel</span><span class="p">(</span>
        <span class="n">expr</span><span class="o">=</span><span class="s2">&quot;amp * sin(2 * pi * freq * x + phi) + base&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_experiment2&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>You have the same set of fit parameters in the two models, but now you fit two datasets
with different trigonometric functions.</p>
</section>
<section id="fitting-with-fixed-parameters">
<span id="curve-analysis-fixed-param"></span><h2>Fitting with fixed parameters<a class="headerlink" href="#fitting-with-fixed-parameters" title="Permalink to this heading">¶</a></h2>
<p>You can also keep certain parameters unchanged during the fitting by specifying the
parameter names in the analysis option <code class="docutils literal notranslate"><span class="pre">fixed_parameters</span></code>. This feature is useful
especially when you want to define a subclass of a particular analysis class.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AnalysisA</span><span class="p">(</span><span class="n">CurveAnalysis</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">models</span><span class="o">=</span><span class="p">[</span>
                <span class="n">lmfit</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ExpressionModel</span><span class="p">(</span>
                    <span class="n">expr</span><span class="o">=</span><span class="s2">&quot;amp * exp(-alpha * x) + base&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_model&quot;</span>
                <span class="p">)</span>
            <span class="p">]</span>
        <span class="p">)</span>

<span class="k">class</span> <span class="nc">AnalysisB</span><span class="p">(</span><span class="n">AnalysisA</span><span class="p">):</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_default_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Options</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_default_options</span><span class="p">()</span>
        <span class="n">options</span><span class="o">.</span><span class="n">fixed_parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;amp&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">options</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>The parameter specified in <code class="docutils literal notranslate"><span class="pre">fixed_parameters</span></code> is excluded from the fitting.
This code will give you identical fit model to the one defined in the following class:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AnalysisB</span><span class="p">(</span><span class="n">CurveAnalysis</span><span class="p">):</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">models</span><span class="o">=</span><span class="p">[</span>
            <span class="n">lmfit</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ExpressionModel</span><span class="p">(</span>
                <span class="n">expr</span><span class="o">=</span><span class="s2">&quot;3.0 * exp(-alpha * x) + base&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_model&quot;</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>However, note that you can also inherit other features, e.g. the algorithm to
generate initial guesses for parameters, from the <code class="docutils literal notranslate"><span class="pre">AnalysisA</span></code> class in the first example.
On the other hand, in the latter case, you need to manually copy and paste
every logic defined in <code class="docutils literal notranslate"><span class="pre">AnalysisA</span></code>.</p>
</section>
<section id="curve-analysis-workflow">
<span id="id2"></span><h2>Curve Analysis workflow<a class="headerlink" href="#curve-analysis-workflow" title="Permalink to this heading">¶</a></h2>
<p>Typically curve analysis performs fitting as follows.
This workflow is defined in the method <code class="xref py py-meth docutils literal notranslate"><span class="pre">CurveAnalysis._run_analysis()</span></code>.</p>
<section id="initialization">
<h3>1. Initialization<a class="headerlink" href="#initialization" title="Permalink to this heading">¶</a></h3>
<p>Curve analysis calls the <code class="xref py py-meth docutils literal notranslate"><span class="pre">_initialization()</span></code> method, where it initializes
some internal states and optionally populates analysis options
with the input experiment data.
In some cases it may train the data processor with fresh outcomes,
or dynamically generate the fit models (<code class="docutils literal notranslate"><span class="pre">self._models</span></code>) with fresh analysis options.
A developer can override this method to perform initialization of analysis-specific variables.</p>
</section>
<section id="data-processing">
<h3>2. Data processing<a class="headerlink" href="#data-processing" title="Permalink to this heading">¶</a></h3>
<p>Curve analysis calls the <code class="xref py py-meth docutils literal notranslate"><span class="pre">_run_data_processing()</span></code> method, where
the data processor in the analysis option is internally called.
This consumes input experiment results and creates the <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.CurveData.html#qiskit_experiments.curve_analysis.CurveData" title="qiskit_experiments.curve_analysis.CurveData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurveData</span></code></a> dataclass.
Then the <code class="xref py py-meth docutils literal notranslate"><span class="pre">_format_data()</span></code> method is called with the processed dataset to format it.
By default, the formatter takes average of the outcomes in the processed dataset
over the same x values, followed by the sorting in the ascending order of x values.
This allows the analysis to easily estimate the slope of the curves to
create algorithmic initial guess of fit parameters.
A developer can inject extra data processing, for example, filtering, smoothing,
or elimination of outliers for better fitting.</p>
</section>
<section id="fitting">
<h3>3. Fitting<a class="headerlink" href="#fitting" title="Permalink to this heading">¶</a></h3>
<p>Curve analysis calls the <code class="xref py py-meth docutils literal notranslate"><span class="pre">_run_curve_fit()</span></code> method, which is the core functionality of the fitting.
Another method <code class="xref py py-meth docutils literal notranslate"><span class="pre">_generate_fit_guesses()</span></code> is internally called to
prepare the initial guess and parameter boundary with respect to the formatted data.
Developers usually override this method to provide better initial guesses
tailored to the defined fit model or type of the associated experiment.
See <a class="reference internal" href="#curve-analysis-init-guess"><span class="std std-ref">Providing initial guesses</span></a> for more details.
Developers can also override the entire <code class="xref py py-meth docutils literal notranslate"><span class="pre">_run_curve_fit()</span></code> method to apply
custom fitting algorithms. This method must return a <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.CurveFitResult.html#qiskit_experiments.curve_analysis.CurveFitResult" title="qiskit_experiments.curve_analysis.CurveFitResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurveFitResult</span></code></a> dataclass.</p>
</section>
<section id="post-processing">
<h3>4. Post processing<a class="headerlink" href="#post-processing" title="Permalink to this heading">¶</a></h3>
<p>Curve analysis runs several postprocessing against the fit outcome.
It calls <code class="xref py py-meth docutils literal notranslate"><span class="pre">_create_analysis_results()</span></code> to create the <a class="reference internal" href="../stubs/qiskit_experiments.framework.AnalysisResultData.html#qiskit_experiments.framework.AnalysisResultData" title="qiskit_experiments.framework.AnalysisResultData"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnalysisResultData</span></code></a> class
for the fitting parameters of interest. A developer can inject custom code to
compute custom quantities based on the raw fit parameters.
See <a class="reference internal" href="#curve-analysis-results"><span class="std std-ref">Curve Analysis Results</span></a> for details.
Afterwards, figure plotting is handed over to the <a class="reference internal" href="visualization.html"><span class="doc">Visualization</span></a> module via
the <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.CurveAnalysis.plotter.html#qiskit_experiments.curve_analysis.CurveAnalysis.plotter" title="qiskit_experiments.curve_analysis.CurveAnalysis.plotter"><code class="xref py py-attr docutils literal notranslate"><span class="pre">plotter</span></code></a> attribute, and a list of created analysis results and the figure are returned.</p>
</section>
</section>
<section id="providing-initial-guesses">
<span id="curve-analysis-init-guess"></span><h2>Providing initial guesses<a class="headerlink" href="#providing-initial-guesses" title="Permalink to this heading">¶</a></h2>
<p>Fitting without initial guesses for parameters often results in a bad fit. Users can
provide initial guesses and boundaries for the fit parameters through analysis options
<code class="docutils literal notranslate"><span class="pre">p0</span></code> and <code class="docutils literal notranslate"><span class="pre">bounds</span></code>. These values are the dictionary keyed on the parameter name, and
one can get the list of parameters with the <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.CurveAnalysis.parameters.html#qiskit_experiments.curve_analysis.CurveAnalysis.parameters" title="qiskit_experiments.curve_analysis.CurveAnalysis.parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CurveAnalysis.parameters</span></code></a>. Each
boundary value can be a tuple of floats representing minimum and maximum values.</p>
<p>Apart from user provided guesses, the analysis can systematically generate those values
with the method <code class="xref py py-meth docutils literal notranslate"><span class="pre">_generate_fit_guesses()</span></code>, which is called with the <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.CurveData.html#qiskit_experiments.curve_analysis.CurveData" title="qiskit_experiments.curve_analysis.CurveData"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurveData</span></code></a>
dataclass. If the analysis contains multiple model definitions, we can get the subset
of curve data with <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.CurveData.get_subset_of.html#qiskit_experiments.curve_analysis.CurveData.get_subset_of" title="qiskit_experiments.curve_analysis.CurveData.get_subset_of"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CurveData.get_subset_of()</span></code></a> using the name of the series. A
developer can implement the algorithm to generate initial guesses and boundaries by
using this curve data object, which will be provided to the fitter. Note that there are
several common initial guess estimators available in <code class="xref py py-mod docutils literal notranslate"><span class="pre">curve_analysis.guess</span></code>.</p>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">_generate_fit_guesses()</span></code> also receives the <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.FitOptions.html#qiskit_experiments.curve_analysis.FitOptions" title="qiskit_experiments.curve_analysis.FitOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">FitOptions</span></code></a> instance
<code class="docutils literal notranslate"><span class="pre">user_opt</span></code>, which contains user provided guesses and boundaries. This is a
dictionary-like object consisting of sub-dictionaries for initial guess <code class="docutils literal notranslate"><span class="pre">.p0</span></code>,
boundary <code class="docutils literal notranslate"><span class="pre">.bounds</span></code>, and extra options for the fitter. See the API
documentation for available options.</p>
<p>The <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.FitOptions.html#qiskit_experiments.curve_analysis.FitOptions" title="qiskit_experiments.curve_analysis.FitOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">FitOptions</span></code></a> class implements convenient method <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_if_empty()</span></code> to manage
conflict with user provided values, i.e. user provided values have higher priority,
thus systematically generated values cannot override user values.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_generate_fit_guesses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_opt</span><span class="p">,</span> <span class="n">curve_data</span><span class="p">):</span>

    <span class="n">opt1</span> <span class="o">=</span> <span class="n">user_opt</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">opt1</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">set_if_empty</span><span class="p">(</span><span class="n">p1</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">opt1</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="n">set_if_empty</span><span class="p">(</span><span class="n">p1</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">opt1</span><span class="o">.</span><span class="n">add_extra_options</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;lm&quot;</span><span class="p">)</span>

    <span class="n">opt2</span> <span class="o">=</span> <span class="n">user_opt</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">opt2</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">set_if_empty</span><span class="p">(</span><span class="n">p1</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">opt1</span><span class="p">,</span> <span class="n">opt2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Here you created two options with different <code class="docutils literal notranslate"><span class="pre">p1</span></code> values. If multiple options are
returned like this, the <code class="xref py py-meth docutils literal notranslate"><span class="pre">_run_curve_fit()</span></code> method attempts to fit with all provided
options and finds the best outcome with the minimum reduced chi-square value. When the
fit model contains some parameter that cannot be easily estimated from the curve data,
you can create multiple options by varying the initial guess to let the fitter find
the most reasonable parameters to explain the model. This allows you to avoid analysis
failure with the poor initial guesses.</p>
</section>
<section id="evaluate-fit-quality">
<span id="curve-analysis-quality"></span><h2>Evaluate Fit Quality<a class="headerlink" href="#evaluate-fit-quality" title="Permalink to this heading">¶</a></h2>
<p>A subclass can override <code class="xref py py-meth docutils literal notranslate"><span class="pre">_evaluate_quality()</span></code> method to
provide an algorithm to evaluate quality of the fitting.
This method is called with the <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.CurveFitResult.html#qiskit_experiments.curve_analysis.CurveFitResult" title="qiskit_experiments.curve_analysis.CurveFitResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurveFitResult</span></code></a> object which contains
fit parameters and the reduced chi-squared value,
in addition to the several statistics on the fitting.
Qiskit Experiments often uses the empirical criterion chi-squared &lt; 3 as a good fitting.</p>
</section>
<section id="curve-analysis-results">
<span id="id3"></span><h2>Curve Analysis Results<a class="headerlink" href="#curve-analysis-results" title="Permalink to this heading">¶</a></h2>
<p>Once the best fit parameters are found, the <code class="xref py py-meth docutils literal notranslate"><span class="pre">_create_analysis_results()</span></code> method is
called with the same <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.CurveFitResult.html#qiskit_experiments.curve_analysis.CurveFitResult" title="qiskit_experiments.curve_analysis.CurveFitResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">CurveFitResult</span></code></a> object.</p>
<p>If you want to create an analysis result entry for the particular parameter,
you can override the analysis options <code class="docutils literal notranslate"><span class="pre">result_parameters</span></code>.
By using <a class="reference internal" href="../stubs/qiskit_experiments.curve_analysis.ParameterRepr.html#qiskit_experiments.curve_analysis.ParameterRepr" title="qiskit_experiments.curve_analysis.ParameterRepr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParameterRepr</span></code></a> representation, you can rename the parameter in the entry.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qiskit_experiments.curve_analysis</span> <span class="kn">import</span> <span class="n">ParameterRepr</span>

<span class="k">def</span> <span class="nf">_default_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Options</span><span class="p">:</span>
    <span class="n">options</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_default_options</span><span class="p">()</span>
    <span class="n">options</span><span class="o">.</span><span class="n">result_parameters</span> <span class="o">=</span> <span class="p">[</span><span class="n">ParameterRepr</span><span class="p">(</span><span class="s2">&quot;p0&quot;</span><span class="p">,</span> <span class="s2">&quot;amp&quot;</span><span class="p">,</span> <span class="s2">&quot;Hz&quot;</span><span class="p">)]</span>

    <span class="k">return</span> <span class="n">options</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Here the first argument <code class="docutils literal notranslate"><span class="pre">p0</span></code> is the target parameter defined in the series definition,
<code class="docutils literal notranslate"><span class="pre">amp</span></code> is the representation of <code class="docutils literal notranslate"><span class="pre">p0</span></code> in the result entry,
and <code class="docutils literal notranslate"><span class="pre">Hz</span></code> is the optional string for the unit of the value if available.</p>
<p>In addition to returning the fit parameters, you can also compute new quantities
by combining multiple fit parameters.
This can be done by overriding the <code class="xref py py-meth docutils literal notranslate"><span class="pre">_create_analysis_results()</span></code> method.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qiskit_experiments.framework</span> <span class="kn">import</span> <span class="n">AnalysisResultData</span>

<span class="k">def</span> <span class="nf">_create_analysis_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fit_data</span><span class="p">,</span> <span class="n">quality</span><span class="p">,</span> <span class="o">**</span><span class="n">metadata</span><span class="p">):</span>

    <span class="n">outcomes</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_create_analysis_results</span><span class="p">(</span><span class="n">fit_data</span><span class="p">,</span> <span class="o">**</span><span class="n">metadata</span><span class="p">)</span>

    <span class="n">p0</span> <span class="o">=</span> <span class="n">fit_data</span><span class="o">.</span><span class="n">ufloat_params</span><span class="p">[</span><span class="s2">&quot;p0&quot;</span><span class="p">]</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="n">fit_data</span><span class="o">.</span><span class="n">ufloat_params</span><span class="p">[</span><span class="s2">&quot;p1&quot;</span><span class="p">]</span>

    <span class="n">extra_entry</span> <span class="o">=</span> <span class="n">AnalysisResultData</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;p01&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">p0</span> <span class="o">*</span> <span class="n">p1</span><span class="p">,</span>
        <span class="n">quality</span><span class="o">=</span><span class="n">quality</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">outcomes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">extra_entry</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">outcomes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Note that both <code class="docutils literal notranslate"><span class="pre">p0</span></code> and <code class="docutils literal notranslate"><span class="pre">p1</span></code> are <a class="reference external" href="https://pythonhosted.org/uncertainties/user_guide.html">UFloat</a> objects consisting of
a nominal value and an error value which assumes the standard deviation.
Since this object natively supports error propagation,
you don’t have to manually recompute the error of the new value.</p>
</section>
<section id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h2>
<p>API documentation: <a class="reference internal" href="../apidocs/curve_analysis.html"><span class="doc">Curve Analysis Module</span></a></p>
</section>
</section>


             </article>
            </div>
            <footer>
<!-- USER FEEDBACK -->
  

    <hr class="helpful-hr hr-top">
      <div class="helpful-container">
        <div class="helpful-question">Was this page helpful?</div>
        <a class="helpful-question yes-link" onclick="clicked('yes')">Yes</a>
        <a class="helpful-question no-link" onclick="clicked('no')">No</a>
        <div class="was-helpful-thank-you" id="was-helpful-thank-you">Thank you!</div>
      </div>
    <hr class="helpful-hr hr-bottom"/>
  
  

  <!-- NEXT/PREVIOUS BUTTONS -->
  <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
    
      <a href="visualization.html" class="btn btn-neutral float-right" title="Visualization: Creating figures" accesskey="n" rel="next">Next <img src="../_static/images/chevron-right-purple.svg" class="next-page"></a>
    
    
      <a href="data_processor.html" class="btn btn-neutral" title="Data Processor: Wrangling data" accesskey="p" rel="prev"><img src="../_static/images/chevron-right-purple.svg" class="previous-page"> Previous</a>
    
  </div>

  <div role="contentinfo">
    <p>
    <!-- SHOW QISKIT COPYRIGHT TEXT -->
        &copy; Copyright 2021-2024, Qiskit Development Team.

    <!-- SHOW DATE PAGE LAST UPDATED -->
      Last updated on 2024/02/08.

    </p>
  </div>

<!-- SHOW 'MADE WITH SPHINX' TEXT -->
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using <a href="https://github.com/Qiskit/qiskit_sphinx_theme">Qiskit Sphinx Theme </a> (based on <a href="https://github.com/pytorch/pytorch_sphinx_theme"> PyTorch Sphinx Theme</a>).
      </div>
     
<br>
</footer>

<script>
  function clicked(ctaType) {
    document.getElementById('was-helpful-thank-you').style.visibility = 'visible';
    window.trackCta(`Helpful - ${ctaType}`);
  }
</script>

          </div>
        </div>

        <!-- RIGHT SIDE AUTOSUMMARY MENU -->
        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">Curve Analysis: Fitting your data</a><ul>
<li><a class="reference internal" href="#curve-analysis-overview">Curve Analysis overview</a></li>
<li><a class="reference internal" href="#defining-new-models">Defining new models</a></li>
<li><a class="reference internal" href="#fitting-with-fixed-parameters">Fitting with fixed parameters</a></li>
<li><a class="reference internal" href="#curve-analysis-workflow">Curve Analysis workflow</a><ul>
<li><a class="reference internal" href="#initialization">1. Initialization</a></li>
<li><a class="reference internal" href="#data-processing">2. Data processing</a></li>
<li><a class="reference internal" href="#fitting">3. Fitting</a></li>
<li><a class="reference internal" href="#post-processing">4. Post processing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#providing-initial-guesses">Providing initial guesses</a></li>
<li><a class="reference internal" href="#evaluate-fit-quality">Evaluate Fit Quality</a></li>
<li><a class="reference internal" href="#curve-analysis-results">Curve Analysis Results</a></li>
<li><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


  <!-- MOBILE MENU FOR SIDEBAR -->
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
      <script src="../_static/jquery.js"></script>
      <script src="../_static/underscore.js"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script src="../_static/doctools.js"></script>
      <script src="../_static/sphinx_highlight.js"></script>
      <script src="../_static/clipboard.min.js"></script>
      <script src="../_static/copybutton.js"></script>
      <script src="../_static/thebelab-helper.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
      <script src="../_static/design-tabs.js"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <script type="text/javascript" src="../_static/js/vendor/popper.min.js"></script>
    <script type="text/javascript" src="../_static/js/vendor/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
    <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript" src="../_static/js/vendor/anchor.min.js"></script>

  <!-- enable language dropdown menu expand -->
  <script type="text/javascript">
    jQuery(function () {
        SphinxRtdTheme.Navigation.enable(true);
    });
  </script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>

</body>
</html>