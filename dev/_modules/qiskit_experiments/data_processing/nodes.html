<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>qiskit_experiments.data_processing.nodes - Qiskit Experiments 0.8.0-22-ga7f6307e0</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=3ee1c6c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/qiskit-sphinx-theme.css?v=8ff9dcb6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/nbsphinx-gallery.css?v=26227f6e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/customstyles.css?v=5690b376" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet"></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M14 2H2C1.73478 2 1.48043 2.10536 1.29289 2.29289C1.10536 2.48043 1 2.73478 1 3V13C1 13.2652 1.10536 13.5196 1.29289 13.7071C1.48043 13.8946 1.73478 14 2 14H14C14.2652 14 14.5196 13.8946 14.7071 13.7071C14.8946 13.5196 15 13.2652 15 13V3C15 2.73478 14.8946 2.48043 14.7071 2.29289C14.5196 2.10536 14.2652 2 14 2V2ZM2 3H10V13H2V3ZM14 13H11V3H14V13Z" fill="currentColor"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M14 3H2V4H14V3Z" fill="currentColor"/>
      <path d="M14 12H2V13H14V12Z" fill="currentColor"/>
      <path d="M14 6H2V7H14V6Z" fill="currentColor"/>
      <path d="M14 9H2V10H14V9Z" fill="currentColor"/>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M11 8L6.00005 13L5.30005 12.3L9.60005 8L5.30005 3.7L6.00005 3L11 8Z" fill="currentColor"/>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M15 13H1V14H15V13Z" fill="currentColor"/>
      <path d="M12.7 4.5C13.1 4.1 13.1 3.5 12.7 3.1L10.9 1.3C10.5 0.9 9.9 0.9 9.5 1.3L2 8.8V12H5.2L12.7 4.5ZM10.2 2L12 3.8L10.5 5.3L8.7 3.5L10.2 2ZM3 11V9.2L8 4.2L9.8 6L4.8 11H3Z" fill="currentColor"/>
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M11 13.0002C11.5523 13.0002 12 12.5525 12 12.0002C12 11.4479 11.5523 11.0002 11 11.0002C10.4477 11.0002 10 11.4479 10 12.0002C10 12.5525 10.4477 13.0002 11 13.0002Z" fill="currentColor"/>
      <path d="M14.8884 11.7394C14.5795 10.9524 14.0464 10.2734 13.3552 9.78646C12.664 9.29954 11.8451 9.02615 11 9.00017C10.1549 9.02615 9.33604 9.29954 8.64484 9.78646C7.95365 10.2734 7.42052 10.9524 7.11155 11.7394L7 12.0002L7.11155 12.2609C7.42052 13.0479 7.95365 13.727 8.64484 14.2139C9.33604 14.7008 10.1549 14.9742 11 15.0002C11.8451 14.9742 12.664 14.7008 13.3552 14.2139C14.0464 13.727 14.5795 13.0479 14.8884 12.2609L15 12.0002L14.8884 11.7394ZM11 14.0002C10.6044 14.0002 10.2178 13.8829 9.88886 13.6631C9.55996 13.4433 9.30362 13.131 9.15224 12.7655C9.00087 12.4001 8.96126 11.998 9.03843 11.61C9.1156 11.222 9.30608 10.8657 9.58579 10.586C9.86549 10.3063 10.2219 10.1158 10.6098 10.0386C10.9978 9.96143 11.3999 10.001 11.7654 10.1524C12.1308 10.3038 12.4432 10.5601 12.6629 10.889C12.8827 11.2179 13 11.6046 13 12.0002C12.9994 12.5304 12.7885 13.0388 12.4136 13.4137C12.0386 13.7887 11.5303 13.9996 11 14.0002Z" fill="currentColor"/>
      <path d="M6 14.0002H4V2.00017H8V5.00017C8.00077 5.26515 8.10637 5.51906 8.29374 5.70643C8.48111 5.8938 8.73502 5.99941 9 6.00017H12V8.00017H13V5.00017C13.0018 4.93446 12.9893 4.86913 12.9634 4.80871C12.9375 4.74828 12.8988 4.6942 12.85 4.65017L9.35 1.15017C9.30599 1.10134 9.2519 1.06263 9.19147 1.03674C9.13104 1.01084 9.06572 0.998364 9 1.00017H4C3.73502 1.00094 3.48111 1.10654 3.29374 1.29391C3.10637 1.48128 3.00077 1.73519 3 2.00017V14.0002C3.00077 14.2652 3.10637 14.5191 3.29374 14.7064C3.48111 14.8938 3.73502 14.9994 4 15.0002H6V14.0002ZM9 2.20017L11.8 5.00017H9V2.20017Z" fill="currentColor"/>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Qiskit Experiments 0.8.0-22-ga7f6307e0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">Qiskit Experiments 0.8.0-22-ga7f6307e0</span>
  
</a>
<form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Qiskit Experiments Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/getting_started.html">Getting Started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/data_processor.html">Data Processor: Wrangling data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/curve_analysis.html">Curve Analysis: Fitting your data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/visualization.html">Visualization: Creating figures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/custom_experiment.html">Writing your own experiment</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../howtos/index.html">How-To Guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of How-To Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../howtos/artifacts.html">Work with experiment artifacts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../howtos/cloud_service.html">Save and load experiment data with the cloud service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../howtos/experiment_times.html">Get experiment timing information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../howtos/figure_generation.html">Control figure generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../howtos/job_splitting.html">Control the splitting of experiment circuits into jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../howtos/rerun_analysis.html">Rerun analysis for an existing experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../howtos/runtime_sessions.html">Use Experiments with Sampler</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../manuals/index.html">Experiment Manuals</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Experiment Manuals</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../manuals/verification/quantum_volume.html">Quantum Volume</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manuals/verification/randomized_benchmarking.html">Randomized Benchmarking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manuals/verification/state_tomography.html">Quantum State Tomography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manuals/characterization/t1.html">T1 Characterization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manuals/characterization/t2hahn.html">T2 Hahn Characterization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manuals/characterization/t2ramsey.html">T2* Ramsey Characterization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manuals/characterization/tphi.html">TÏ† Characterization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../manuals/measurement/readout_mitigation.html">Readout Mitigation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidocs/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/main.html">Qiskit Experiments (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments</span></code>)</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/framework.html">Experiment Framework (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.framework</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Experiment Framework (qiskit_experiments.framework)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.ExperimentData.html">ExperimentData</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.ExperimentStatus.html">ExperimentStatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.AnalysisStatus.html">AnalysisStatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.AnalysisResult.html">AnalysisResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.AnalysisResultData.html">AnalysisResultData</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.AnalysisResultTable.html">AnalysisResultTable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.ExperimentConfig.html">ExperimentConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.AnalysisConfig.html">AnalysisConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.ExperimentEncoder.html">ExperimentEncoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.ExperimentDecoder.html">ExperimentDecoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.ArtifactData.html">ArtifactData</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.FigureData.html">FigureData</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.Provider.html">Provider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.BaseProvider.html">BaseProvider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.IBMProvider.html">IBMProvider</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.Job.html">Job</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.BaseJob.html">BaseJob</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.ExtendedJob.html">ExtendedJob</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.MeasLevel.html">MeasLevel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.MeasReturnType.html">MeasReturnType</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.CompositeExperiment.html">CompositeExperiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.ParallelExperiment.html">ParallelExperiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.BatchExperiment.html">BatchExperiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.CompositeAnalysis.html">CompositeAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.BaseExperiment.html">BaseExperiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.BaseAnalysis.html">BaseAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.BackendData.html">BackendData</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.framework.BackendTiming.html">BackendTiming</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/library.html">Experiment Library (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.library</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Experiment Library (qiskit_experiments.library)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.StandardRB.html">StandardRB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.InterleavedRB.html">InterleavedRB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.LayerFidelity.html">LayerFidelity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.TomographyExperiment.html">TomographyExperiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.StateTomography.html">StateTomography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.ProcessTomography.html">ProcessTomography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.MitigatedStateTomography.html">MitigatedStateTomography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.MitigatedProcessTomography.html">MitigatedProcessTomography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.quantum_volume.QuantumVolume.html">QuantumVolume</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.T1.html">T1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.T2Hahn.html">T2Hahn</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.T2Ramsey.html">T2Ramsey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.Tphi.html">Tphi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.HalfAngle.html">HalfAngle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineAmplitude.html">FineAmplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineXAmplitude.html">FineXAmplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineSXAmplitude.html">FineSXAmplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.RamseyXY.html">RamseyXY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineFrequency.html">FineFrequency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.ReadoutAngle.html">ReadoutAngle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineDrag.html">FineDrag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineXDrag.html">FineXDrag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineSXDrag.html">FineSXDrag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.MultiStateDiscrimination.html">MultiStateDiscrimination</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.ZZRamsey.html">ZZRamsey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineZXAmplitude.html">FineZXAmplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.LocalReadoutError.html">LocalReadoutError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.CorrelatedReadoutError.html">CorrelatedReadoutError</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/data_processing.html">Data Processing (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.data_processing</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Data Processing (qiskit_experiments.data_processing)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.DataProcessor.html">DataProcessor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.DataAction.html">DataAction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.TrainableDataAction.html">TrainableDataAction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.Probability.html">Probability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.MarginalizeCounts.html">MarginalizeCounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.ToImag.html">ToImag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.ToReal.html">ToReal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.SVD.html">SVD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.DiscriminatorNode.html">DiscriminatorNode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.MemoryToCounts.html">MemoryToCounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.AverageData.html">AverageData</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.BasisExpectationValue.html">BasisExpectationValue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.MinMaxNormalize.html">MinMaxNormalize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.ShotOrder.html">ShotOrder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.RestlessNode.html">RestlessNode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.RestlessToCounts.html">RestlessToCounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.RestlessToIQ.html">RestlessToIQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.BaseDiscriminator.html">BaseDiscriminator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.SkLDA.html">SkLDA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.SkQDA.html">SkQDA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.BaseReadoutMitigator.html">BaseReadoutMitigator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.LocalReadoutMitigator.html">LocalReadoutMitigator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.data_processing.CorrelatedReadoutMitigator.html">CorrelatedReadoutMitigator</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/curve_analysis.html">Curve Analysis (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.curve_analysis</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Curve Analysis (qiskit_experiments.curve_analysis)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.BaseCurveAnalysis.html">BaseCurveAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.CurveAnalysis.html">CurveAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.CompositeCurveAnalysis.html">CompositeCurveAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.ScatterTable.html">ScatterTable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.CurveFitResult.html">CurveFitResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.ParameterRepr.html">ParameterRepr</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.FitOptions.html">FitOptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.BlochTrajectoryAnalysis.html">BlochTrajectoryAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.DecayAnalysis.html">DecayAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.DampedOscillationAnalysis.html">DampedOscillationAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.OscillationAnalysis.html">OscillationAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.GaussianAnalysis.html">GaussianAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.ErrorAmplificationAnalysis.html">ErrorAmplificationAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.fit_function.cos.html">cos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.fit_function.cos_decay.html">cos_decay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.fit_function.exponential_decay.html">exponential_decay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.fit_function.gaussian.html">gaussian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.fit_function.sqrt_lorentzian.html">sqrt_lorentzian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.fit_function.sin.html">sin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.fit_function.sin_decay.html">sin_decay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.guess.constant_sinusoidal_offset.html">constant_sinusoidal_offset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.guess.constant_spectral_offset.html">constant_spectral_offset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.guess.exp_decay.html">exp_decay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.guess.rb_decay.html">rb_decay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.guess.full_width_half_max.html">full_width_half_max</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.guess.frequency.html">frequency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.guess.max_height.html">max_height</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.guess.min_height.html">min_height</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.guess.oscillation_exp_decay.html">oscillation_exp_decay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.analysis_result_to_repr.html">analysis_result_to_repr</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.convert_lmfit_result.html">convert_lmfit_result</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.data_sort.html">data_sort</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.eval_with_uncertainties.html">eval_with_uncertainties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.filter_data.html">filter_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.inverse_weighted_variance.html">inverse_weighted_variance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.is_error_not_significant.html">is_error_not_significant</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.mean_xy_data.html">mean_xy_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.multi_mean_xy_data.html">multi_mean_xy_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.level2_probability.html">level2_probability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.probability.html">probability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.sample_average.html">sample_average</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.curve_analysis.utils.shot_weighted_average.html">shot_weighted_average</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/database_service.html">Database Service (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.database_service</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Database Service (qiskit_experiments.database_service)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.database_service.DeviceComponent.html">DeviceComponent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.database_service.Qubit.html">Qubit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.database_service.Resonator.html">Resonator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.database_service.UnknownComponent.html">UnknownComponent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.database_service.to_component.html">to_component</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.database_service.ExperimentDataError.html">ExperimentDataError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.database_service.ExperimentEntryExists.html">ExperimentEntryExists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.database_service.ExperimentEntryNotFound.html">ExperimentEntryNotFound</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/visualization.html">Visualization (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.visualization</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Visualization (qiskit_experiments.visualization)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.visualization.BasePlotter.html">BasePlotter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.visualization.CurvePlotter.html">CurvePlotter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.visualization.IQPlotter.html">IQPlotter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.visualization.BaseDrawer.html">BaseDrawer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.visualization.MplDrawer.html">MplDrawer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.visualization.PlotStyle.html">PlotStyle</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/test.html">Test Utilities (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.test</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Test Utilities (qiskit_experiments.test)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.test.PulseBackend.html">PulseBackend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.test.SingleTransmonTestBackend.html">SingleTransmonTestBackend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.test.MockIQBackend.html">MockIQBackend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.test.MockIQParallelBackend.html">MockIQParallelBackend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.test.T2HahnBackend.html">T2HahnBackend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.test.NoisyDelayAerBackend.html">NoisyDelayAerBackend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.test.MockIQExperimentHelper.html">MockIQExperimentHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.test.MockIQParallelExperimentHelper.html">MockIQParallelExperimentHelper</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/mod_characterization.html">Characterization Experiments (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.library.characterization</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Characterization Experiments (qiskit_experiments.library.characterization)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.T1.html">T1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.T2Ramsey.html">T2Ramsey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.T2Hahn.html">T2Hahn</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.Tphi.html">Tphi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.HalfAngle.html">HalfAngle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineAmplitude.html">FineAmplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineXAmplitude.html">FineXAmplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineSXAmplitude.html">FineSXAmplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineZXAmplitude.html">FineZXAmplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.RamseyXY.html">RamseyXY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineFrequency.html">FineFrequency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.ReadoutAngle.html">ReadoutAngle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineDrag.html">FineDrag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineXDrag.html">FineXDrag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineSXDrag.html">FineSXDrag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.LocalReadoutError.html">LocalReadoutError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.CorrelatedReadoutError.html">CorrelatedReadoutError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.MultiStateDiscrimination.html">MultiStateDiscrimination</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.ZZRamsey.html">ZZRamsey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.T1Analysis.html">T1Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.T1KerneledAnalysis.html">T1KerneledAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.T2RamseyAnalysis.html">T2RamseyAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.T2HahnAnalysis.html">T2HahnAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.TphiAnalysis.html">TphiAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.FineAmplitudeAnalysis.html">FineAmplitudeAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.RamseyXYAnalysis.html">RamseyXYAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.ReadoutAngleAnalysis.html">ReadoutAngleAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.LocalReadoutErrorAnalysis.html">LocalReadoutErrorAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.CorrelatedReadoutErrorAnalysis.html">CorrelatedReadoutErrorAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.ZZRamseyAnalysis.html">ZZRamseyAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.characterization.MultiStateDiscriminationAnalysis.html">MultiStateDiscriminationAnalysis</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/mod_randomized_benchmarking.html">Randomized Benchmarking Experiments (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.library.randomized_benchmarking</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Randomized Benchmarking Experiments (qiskit_experiments.library.randomized_benchmarking)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.StandardRB.html">StandardRB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.InterleavedRB.html">InterleavedRB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.LayerFidelity.html">LayerFidelity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.RBAnalysis.html">RBAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.InterleavedRBAnalysis.html">InterleavedRBAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.LayerFidelityAnalysis.html">LayerFidelityAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.RBDefaultCliffordSynthesis.html">RBDefaultCliffordSynthesis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.RBUtils.html">RBUtils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.randomized_benchmarking.CliffordUtils.html">CliffordUtils</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/mod_tomography.html">Tomography Experiments (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.library.tomography</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Tomography Experiments (qiskit_experiments.library.tomography)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.TomographyExperiment.html">TomographyExperiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.StateTomography.html">StateTomography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.ProcessTomography.html">ProcessTomography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.MitigatedStateTomography.html">MitigatedStateTomography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.MitigatedProcessTomography.html">MitigatedProcessTomography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.TomographyAnalysis.html">TomographyAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.StateTomographyAnalysis.html">StateTomographyAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.ProcessTomographyAnalysis.html">ProcessTomographyAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.MitigatedTomographyAnalysis.html">MitigatedTomographyAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.fitters.linear_inversion.html">linear_inversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.fitters.cvxpy_gaussian_lstsq.html">cvxpy_gaussian_lstsq</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.fitters.cvxpy_linear_lstsq.html">cvxpy_linear_lstsq</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.basis.PauliMeasurementBasis.html">PauliMeasurementBasis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.basis.PauliPreparationBasis.html">PauliPreparationBasis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.basis.Pauli6PreparationBasis.html">Pauli6PreparationBasis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.basis.LocalMeasurementBasis.html">LocalMeasurementBasis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.basis.LocalPreparationBasis.html">LocalPreparationBasis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.basis.MeasurementBasis.html">MeasurementBasis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.tomography.basis.PreparationBasis.html">PreparationBasis</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../apidocs/mod_quantum_volume.html">Quantum Volume Experiment (<code class="xref py py-mod docutils literal notranslate"><span class="pre">qiskit_experiments.library.quantum_volume</span></code>)</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of Quantum Volume Experiment (qiskit_experiments.library.quantum_volume)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.quantum_volume.QuantumVolume.html">QuantumVolume</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.quantum_volume.QuantumVolumeAnalysis.html">QuantumVolumeAnalysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stubs/qiskit_experiments.library.quantum_volume.QuantumVolumePlotter.html">QuantumVolumePlotter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Qiskit-Community/qiskit-experiments">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://qiskit-community.github.io/qiskit-experiments/dev/">Development Branch Docs</a></li>
</ul>

</div><div class="qiskit-previous-releases-container">
    <input id="previous-releases-checkbox" name="previous-releases-checkbox" role="switch" type="checkbox">
    <div class="qiskit-previous-releases-header-container"><label for="previous-releases-checkbox">
            <p role="note">Previous Releases</p>
            <div class="qiskit-previous-releases-toggle-container">
                <div class="visually-hidden">Toggle navigation of Previous Releases</div>
                <i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i>
            </div>
        </label>
    </div>
    <div class="qiskit-previous-releases-list-container">
        <ul>
        
            <li><a href="/qiskit-experiments/stable/0.7/index.html" rel="nofollow noindex">0.7</a></li>
        
            <li><a href="/qiskit-experiments/stable/0.6/index.html" rel="nofollow noindex">0.6</a></li>
        
            <li><a href="/qiskit-experiments/stable/0.5/index.html" rel="nofollow noindex">0.5</a></li>
        
        </ul>
    </div>
</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <h1>Source code for qiskit_experiments.data_processing.nodes</h1><div class="highlight"><pre>
<span></span><span class="c1"># This code is part of Qiskit.</span>
<span class="c1">#</span>
<span class="c1"># (C) Copyright IBM 2021.</span>
<span class="c1">#</span>
<span class="c1"># This code is licensed under the Apache License, Version 2.0. You may</span>
<span class="c1"># obtain a copy of this license in the LICENSE.txt file in the root directory</span>
<span class="c1"># of this source tree or at http://www.apache.org/licenses/LICENSE-2.0.</span>
<span class="c1">#</span>
<span class="c1"># Any modifications or derivative works of this code must retain this</span>
<span class="c1"># copyright notice, and modified files need to carry a notice indicating</span>
<span class="c1"># that they have been altered from the originals.</span>

<span class="sd">&quot;&quot;&quot;Different data analysis steps.&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">abstractmethod</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABC</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">numbers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Number</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">Set</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">uncertainties</span><span class="w"> </span><span class="kn">import</span> <span class="n">unumpy</span> <span class="k">as</span> <span class="n">unp</span><span class="p">,</span> <span class="n">ufloat</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit.result.postprocess</span><span class="w"> </span><span class="kn">import</span> <span class="n">format_counts_memory</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_experiments.framework.deprecation</span><span class="w"> </span><span class="kn">import</span> <span class="n">deprecate_func</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_experiments.data_processing.data_action</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataAction</span><span class="p">,</span> <span class="n">TrainableDataAction</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_experiments.data_processing.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataProcessorError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_experiments.data_processing.discriminator</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseDiscriminator</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_experiments.framework</span><span class="w"> </span><span class="kn">import</span> <span class="n">Options</span>


<div class="viewcode-block" id="AverageData">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.AverageData.html#qiskit_experiments.data_processing.AverageData">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AverageData</span><span class="p">(</span><span class="n">DataAction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A node to average data representable as numpy arrays.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Initialize a data averaging node.</span>

<span class="sd">        Args:</span>
<span class="sd">            axis: The axis along which to average.</span>
<span class="sd">            validate: If set to False the DataAction will not validate its input.</span>

<span class="sd">        Notes:</span>
<span class="sd">            If the input array has no standard error, then this node will compute the</span>
<span class="sd">            standard error of the mean, i.e. the standard deviation of the datum divided by</span>
<span class="sd">            :math:`\sqrt{N}` where :math:`N` is the number of data points.</span>
<span class="sd">            Otherwise the standard error is given by the square root of :math:`N^{-1}` times</span>
<span class="sd">            the sum of the squared errors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">validate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span> <span class="o">=</span> <span class="n">axis</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format the data into numpy arrays.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to format. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The data that has been validated and formatted.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DataProcessorError: When the specified axis does not exist in given array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Cannot average the </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="si">}</span><span class="s2"> dimensional &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;array along axis </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Average the data.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to process. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>

<span class="sd">        Returns:</span>
<span class="sd">             Arrays with one less dimension than the given data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span>

        <span class="n">reduced_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
        <span class="n">nominals</span> <span class="o">=</span> <span class="n">unp</span><span class="o">.</span><span class="n">nominal_values</span><span class="p">(</span><span class="n">reduced_array</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="n">invalid</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">):</span>
            <span class="c1"># Setting std_devs to NaN will trigger floating point exceptions</span>
            <span class="c1"># which we can ignore. See https://stackoverflow.com/q/75656026</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">unp</span><span class="o">.</span><span class="n">std_devs</span><span class="p">(</span><span class="n">reduced_array</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">errors</span><span class="p">)):</span>
            <span class="c1"># replace empty elements with SEM</span>
            <span class="n">sem</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">unp</span><span class="o">.</span><span class="n">nominal_values</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="n">ax</span><span class="p">])</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">errors</span><span class="p">),</span> <span class="n">sem</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">unp</span><span class="o">.</span><span class="n">uarray</span><span class="p">(</span><span class="n">nominals</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of the node.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(validate=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="si">}</span><span class="s2">, axis=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="si">}</span><span class="s2">)&quot;</span></div>



<div class="viewcode-block" id="MinMaxNormalize">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.MinMaxNormalize.html#qiskit_experiments.data_processing.MinMaxNormalize">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MinMaxNormalize</span><span class="p">(</span><span class="n">DataAction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Normalizes the data.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Normalize the data to the interval [0, 1].</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to process. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The normalized data.</span>

<span class="sd">        Notes:</span>
<span class="sd">            This doesn&#39;t consider the uncertainties of the minimum or maximum values.</span>
<span class="sd">            Input data array is just scaled by the data range.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nominals</span> <span class="o">=</span> <span class="n">unp</span><span class="o">.</span><span class="n">nominal_values</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">min_y</span><span class="p">,</span> <span class="n">max_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">nominals</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">nominals</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">data</span> <span class="o">-</span> <span class="n">min_y</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">max_y</span> <span class="o">-</span> <span class="n">min_y</span><span class="p">)</span></div>



<div class="viewcode-block" id="SVD">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.SVD.html#qiskit_experiments.data_processing.SVD">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SVD</span><span class="p">(</span><span class="n">TrainableDataAction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Singular Value Decomposition of averaged IQ data.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create new action.</span>

<span class="sd">        Args:</span>
<span class="sd">            validate: If set to False the DataAction will not validate its input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">validate</span><span class="o">=</span><span class="n">validate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_parameters</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Options</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default parameters.</span>

<span class="sd">        Parameters are defined for each qubit in the data and thus</span>
<span class="sd">        represented as an array-like.</span>

<span class="sd">        Trainable parameters:</span>
<span class="sd">            main_axes: A unit vector representing the main axis in IQ plane.</span>
<span class="sd">            i_means: Mean value of training data along I quadrature.</span>
<span class="sd">            q_means: Mean value of training data along Q quadrature.</span>
<span class="sd">            scales: Scaling of IQ signal.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_default_parameters</span><span class="p">()</span>
        <span class="n">params</span><span class="o">.</span><span class="n">main_axes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">params</span><span class="o">.</span><span class="n">i_means</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">params</span><span class="o">.</span><span class="n">q_means</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">params</span><span class="o">.</span><span class="n">scales</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">params</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that the IQ data is 2D and convert it to a numpy array.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to format. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>
<span class="sd">                This data has different dimensions depending on whether</span>
<span class="sd">                single-shot or averaged data is being processed.</span>
<span class="sd">                Single-shot data is four dimensional, i.e., ``[#circuits, #shots, #slots, 2]``,</span>
<span class="sd">                while averaged IQ data is three dimensional, i.e., ``[#circuits, #slots, 2]``.</span>
<span class="sd">                Here, ``#slots`` is the number of classical registers used in the circuit.</span>

<span class="sd">        Returns:</span>
<span class="sd">            data and any error estimate as a numpy array.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DataProcessorError: If the datum does not have the correct format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># identify shape</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># level1 single-shot data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># level1 data averaged over shots</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Data given to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> is not likely level1 data.&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">ex</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;IQ data given to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> does not have two-dimensions &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;(I and Q). Instead, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span><span class="si">}</span><span class="s2"> dimensions were found.&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Project the IQ data onto the axis defined by an SVD and scale it.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to process. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A Tuple of 1D arrays of the result of the SVD and the associated error. Each entry</span>
<span class="sd">            is the real part of the averaged IQ data of a qubit. The data has the shape</span>
<span class="sd">            n_circuits x n_slots for averaged data and n_circuits x n_shots x n_slots for</span>
<span class="sd">            single-shot data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DataProcessorError: If the SVD has not been previously trained on data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_trained</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span><span class="s2">&quot;SVD must be trained on data before it can be used.&quot;</span><span class="p">)</span>

        <span class="c1"># IQ axis is reduced by projection</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># level1 average mode</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># level1 single mode</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span>

        <span class="n">projected_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">dims</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span><span class="p">):</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">scales</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">main_axes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
            <span class="n">mean_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">i_means</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
            <span class="n">mean_q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">q_means</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Single shot</span>
                <span class="k">for</span> <span class="n">circ_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">):</span>
                    <span class="n">centered</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">circ_idx</span><span class="p">,</span> <span class="p">:,</span> <span class="n">idx</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">mean_i</span><span class="p">,</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">circ_idx</span><span class="p">,</span> <span class="p">:,</span> <span class="n">idx</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">mean_q</span><span class="p">,</span>
                    <span class="p">]</span>
                    <span class="n">projected_data</span><span class="p">[</span><span class="n">circ_idx</span><span class="p">,</span> <span class="p">:,</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">axis</span> <span class="o">@</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">centered</span><span class="p">)</span> <span class="o">/</span> <span class="n">scale</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Averaged</span>
                <span class="n">centered</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">[:,</span> <span class="n">idx</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">mean_i</span><span class="p">,</span> <span class="n">data</span><span class="p">[:,</span> <span class="n">idx</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">mean_q</span><span class="p">]</span>
                <span class="n">projected_data</span><span class="p">[:,</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">axis</span> <span class="o">@</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">centered</span><span class="p">)</span> <span class="o">/</span> <span class="n">scale</span>

        <span class="k">return</span> <span class="n">projected_data</span>

<div class="viewcode-block" id="SVD.train">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.SVD.html#qiskit_experiments.data_processing.SVD.train">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">train</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Train the SVD on the given data.</span>

<span class="sd">        Each element of the given data will be converted to a 2D array of dimension</span>
<span class="sd">        n_qubits x 2. The number of qubits is inferred from the shape of the data.</span>
<span class="sd">        For each qubit the data is collected into an array of shape 2 x n_data_points.</span>
<span class="sd">        The mean of the in-phase a quadratures is subtracted before passing the data</span>
<span class="sd">        to numpy&#39;s svd function. The dominant axis and the scale is saved for each</span>
<span class="sd">        qubit so that future data points can be projected onto the axis.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Before training the SVD the mean of the training data is subtracted from the</span>
<span class="sd">            training data to avoid large offsets in the data.</span>
<span class="sd">            These means can be retrieved with :attr:`.parameters.i_means` or</span>
<span class="sd">            :attr:`parameters.q_means` for I and Q quadrature, respectively.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to be trained. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># TODO do not remove standard error. Currently svd is not supported.</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">unp</span><span class="o">.</span><span class="n">nominal_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_format_data</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

        <span class="n">main_axes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">scales</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">i_means</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">q_means</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span><span class="p">):</span>
            <span class="n">datums</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">datum</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data</span><span class="p">])</span><span class="o">.</span><span class="n">T</span>

            <span class="c1"># Calculate the mean of the data to recenter it in the IQ plane.</span>
            <span class="n">mean_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">datums</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:])</span>
            <span class="n">mean_q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">datums</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:])</span>
            <span class="n">i_means</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mean_i</span><span class="p">)</span>
            <span class="n">q_means</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mean_q</span><span class="p">)</span>

            <span class="n">datums</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">datums</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">-</span> <span class="n">mean_i</span>
            <span class="n">datums</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">datums</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">-</span> <span class="n">mean_q</span>

            <span class="n">mat_u</span><span class="p">,</span> <span class="n">mat_s</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">datums</span><span class="p">)</span>

            <span class="c1"># There is an arbitrary sign in the direction of the matrix which we fix to</span>
            <span class="c1"># positive to make the SVD node more reliable in tests and real settings.</span>
            <span class="n">main_axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">mat_u</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="n">mat_u</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="n">scales</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mat_s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">(</span>
            <span class="n">main_axes</span><span class="o">=</span><span class="n">main_axes</span><span class="p">,</span>
            <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
            <span class="n">i_means</span><span class="o">=</span><span class="n">i_means</span><span class="p">,</span>
            <span class="n">q_means</span><span class="o">=</span><span class="n">q_means</span><span class="p">,</span>
        <span class="p">)</span></div>
</div>



<span class="k">class</span><span class="w"> </span><span class="nc">IQPart</span><span class="p">(</span><span class="n">DataAction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract class for IQ data post-processing.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            scale: Float with which to multiply the IQ data. Defaults to 1.0.</span>
<span class="sd">            validate: If set to False the DataAction will not validate its input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">validate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Defines how the IQ point is processed.</span>

<span class="sd">        The last dimension of the array should correspond to [real, imaginary] part of data.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to process. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The data that has been processed.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format and validate the input.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to format. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The data that has been validated and formatted.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DataProcessorError: When input data is not likely IQ data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># identify shape</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># level1 single-shot data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># level1 data averaged over shots</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Data given to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> is not likely level1 data.&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">ex</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;IQ data given to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> must be a multi-dimensional array&quot;</span>
                    <span class="s2">&quot;of dimension [d0, d1, ..., 2] in which the last dimension &quot;</span>
                    <span class="s2">&quot;corresponds to IQ elements.&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Input data contains element with length </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> != 2.&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of the node.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(validate=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="si">}</span><span class="s2">, scale=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span><span class="s2">)&quot;</span>


<div class="viewcode-block" id="ToReal">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.ToReal.html#qiskit_experiments.data_processing.ToReal">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ToReal</span><span class="p">(</span><span class="n">IQPart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;IQ data post-processing. Isolate the real part of single-shot IQ data.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Take the real part of the IQ data.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: An N-dimensional array of complex IQ point as [real, imaginary].</span>

<span class="sd">        Returns:</span>
<span class="sd">            A N-1 dimensional array, each entry is the real part of the given IQ data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span></div>



<div class="viewcode-block" id="ToImag">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.ToImag.html#qiskit_experiments.data_processing.ToImag">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ToImag</span><span class="p">(</span><span class="n">IQPart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;IQ data post-processing. Isolate the imaginary part of single-shot IQ data.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Take the imaginary part of the IQ data.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: An N-dimensional array of complex IQ point as [real, imaginary].</span>

<span class="sd">        Returns:</span>
<span class="sd">            A N-1 dimensional array, each entry is the imaginary part of the given IQ data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span></div>



<span class="k">class</span><span class="w"> </span><span class="nc">ToAbs</span><span class="p">(</span><span class="n">IQPart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;IQ data post-processing. Take the absolute value of the IQ point.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Take the absolute value of the IQ data.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: An N-dimensional array of complex IQ point as [real, imaginary].</span>

<span class="sd">        Returns:</span>
<span class="sd">            A N-1 dimensional array, each entry is the absolute value of the given IQ data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=no-member</span>
        <span class="k">return</span> <span class="n">unp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span>


<div class="viewcode-block" id="DiscriminatorNode">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.DiscriminatorNode.html#qiskit_experiments.data_processing.DiscriminatorNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DiscriminatorNode</span><span class="p">(</span><span class="n">DataAction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A class to discriminate kerneled data, e.g., IQ data, to produce counts.</span>

<span class="sd">    This node integrates into the data processing chain a serializable</span>
<span class="sd">    :class:`.BaseDiscriminator` subclass instance which must have a</span>
<span class="sd">    :meth:`~.BaseDiscriminator.predict` method that takes as input a list of lists and</span>
<span class="sd">    returns a list of labels. Crucially, this node can be initialized with a single</span>
<span class="sd">    discriminator which applies to each memory slot or it can be initialized with a list</span>
<span class="sd">    of discriminators, i.e., one for each slot.</span>

<span class="sd">    .. note::</span>

<span class="sd">        Future versions may see this class become a sub-class of :class:`.TrainableDataAction`.</span>

<span class="sd">    .. note::</span>

<span class="sd">        This node will drop uncertainty from unclassified nodes.</span>
<span class="sd">        Returned labels don&#39;t have uncertainty.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">discriminators</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BaseDiscriminator</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">BaseDiscriminator</span><span class="p">]],</span>
        <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the node with an object that can discriminate.</span>

<span class="sd">        Args:</span>
<span class="sd">            discriminators: The entity that will perform the discrimination. This needs to</span>
<span class="sd">                be a :class:`.BaseDiscriminator` or a list thereof that takes</span>
<span class="sd">                as input a list of lists and returns a list of labels. If a list of</span>
<span class="sd">                discriminators is given then there should be as many discriminators as there</span>
<span class="sd">                will be slots in the memory. The discriminator at the i-th index will be applied</span>
<span class="sd">                to the i-th memory slot.</span>
<span class="sd">            validate: If set to False the DataAction will not validate its input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">validate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_discriminator</span> <span class="o">=</span> <span class="n">discriminators</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that there are as many discriminators as there are slots.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># identify shape</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># level1 single-shot data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_iq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The data given to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> does not have the shape of &quot;</span>
                <span class="s2">&quot;single-shot IQ data; expecting a 4D array.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">ex</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;IQ data given to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> must be a multi-dimensional array&quot;</span>
                    <span class="s2">&quot;of dimension [d0, d1, ..., 2] in which the last dimension &quot;</span>
                    <span class="s2">&quot;corresponds to IQ elements.&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Input data contains element with length </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> != 2.&quot;</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_discriminator</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_discriminator</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;The Discriminator node has </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_discriminator</span><span class="p">)</span><span class="si">}</span><span class="s2"> which does &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;not match the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span><span class="si">}</span><span class="s2"> slots in the data.&quot;</span>
                    <span class="p">)</span>

        <span class="k">return</span> <span class="n">unp</span><span class="o">.</span><span class="n">nominal_values</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Discriminate the data.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The IQ data as a list of points to discriminate. This data should have</span>
<span class="sd">                the shape dim_1 x dim_2 x ... x dim_k x 2.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The discriminated data as a list of labels with shape dim_1 x ... x dim_k.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Case where one discriminator is applied to all the data.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_discriminator</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="c1"># Reshape the IQ data to an array of size n x 2</span>
            <span class="n">shape</span><span class="p">,</span> <span class="n">data_length</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">dim</span> <span class="ow">in</span> <span class="n">shape</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">data_length</span> <span class="o">*=</span> <span class="n">dim</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">data_length</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>  <span class="c1"># the last dim is guaranteed by _process</span>

            <span class="c1"># Classify the data using the discriminator and reshape it to dim_1 x ... x dim_k</span>
            <span class="n">classified</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_discriminator</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="c1"># case where a discriminator is applied to each slot.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">classified</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_slots</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">discriminator</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_discriminator</span><span class="p">):</span>
                <span class="n">sub_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">idx</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
                <span class="n">sub_classified</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">discriminator</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">sub_data</span><span class="p">))</span>
                <span class="n">sub_classified</span> <span class="o">=</span> <span class="n">sub_classified</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">))</span>
                <span class="n">classified</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub_classified</span>

        <span class="c1"># Concatenate the bit-strings together.</span>
        <span class="n">labeled_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">):</span>
            <span class="n">labeled_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">classified</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">jdx</span><span class="p">,</span> <span class="p">:][::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">jdx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">)]</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">labeled_data</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">))</span></div>



<div class="viewcode-block" id="MemoryToCounts">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.MemoryToCounts.html#qiskit_experiments.data_processing.MemoryToCounts">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MemoryToCounts</span><span class="p">(</span><span class="n">DataAction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A data action that takes discriminated data and transforms it into a counts dict.</span>

<span class="sd">    This node is intended to be used after the :class:`.DiscriminatorNode` node. It will convert</span>
<span class="sd">    the classified memory into a list of count dictionaries wrapped in a numpy array.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the input data.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                    <span class="s2">&quot;The data should be an array with at least two dimensions.&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            data: The classified data to format into a counts dictionary. The first dimension</span>
<span class="sd">                is assumed to correspond to the different circuit executions.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of dictionaries where each dict is a count dictionary over the labels of</span>
<span class="sd">            the input data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_counts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">counts</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">bit_string</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">datum</span><span class="p">):</span>
                <span class="n">counts</span><span class="p">[</span><span class="n">bit_string</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">datum</span> <span class="o">==</span> <span class="n">bit_string</span><span class="p">)</span>

            <span class="n">all_counts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">all_counts</span><span class="p">)</span></div>



<span class="k">class</span><span class="w"> </span><span class="nc">CountsAction</span><span class="p">(</span><span class="n">DataAction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An abstract DataAction that acts on count dictionaries.&quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Defines how the counts are processed.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks that the given data has a counts format.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to format. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>
<span class="sd">                This is usually an object data type containing Python dictionaries of</span>
<span class="sd">                count data keyed on the measured bitstring.</span>
<span class="sd">                A count value is a discrete quantity representing the frequency of an event.</span>
<span class="sd">                Therefore, count values do not have an uncertainty.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The ``data`` as given.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DataProcessorError: If the data is not a counts dict or a list of counts dicts.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">valid_count_type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">datum</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Data entry must be dictionary of counts, received </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">datum</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
                    <span class="p">)</span>
                <span class="k">for</span> <span class="n">bit_str</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">datum</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bit_str</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Key </span><span class="si">{</span><span class="n">bit_str</span><span class="si">}</span><span class="s2"> is not a valid count key in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
                        <span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">valid_count_type</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Count </span><span class="si">{</span><span class="n">bit_str</span><span class="si">}</span><span class="s2"> is not a valid count for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">. &quot;</span>
                            <span class="s2">&quot;The uncertainty of probability is computed based on sampling error, &quot;</span>
                            <span class="s2">&quot;thus the count should be an error-free discrete quantity &quot;</span>
                            <span class="s2">&quot;representing the frequency of event.&quot;</span>
                        <span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span>


<div class="viewcode-block" id="MarginalizeCounts">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.MarginalizeCounts.html#qiskit_experiments.data_processing.MarginalizeCounts">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MarginalizeCounts</span><span class="p">(</span><span class="n">CountsAction</span><span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;A data action to marginalize count dictionaries.</span>

<span class="sd">    This data action takes a count dictionary and returns a new count dictionary that</span>
<span class="sd">    is marginalized over a set of specified qubits. For example, given the count</span>
<span class="sd">    dictionary :code:`{&quot;010&quot;: 1, &quot;110&quot;: 10, &quot;100&quot;: 100}` this node will return the</span>
<span class="sd">    count dictionary :code:`{&quot;10&quot;: 11, &quot;00&quot;: 100}` when marginalized over qubit 2.</span>

<span class="sd">    .. note::</span>
<span class="sd">        This data action can be used to discard one or more qubits in the counts</span>
<span class="sd">        dictionary. This is, for example, useful when processing two-qubit restless</span>
<span class="sd">        experiments but can be used in a more general context. In composite</span>
<span class="sd">        experiments the counts marginalization is already done in the data container.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qubits_to_keep</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a counts marginalization node.</span>

<span class="sd">        Args:</span>
<span class="sd">            qubits_to_keep: A set of qubits to retain during the marginalization process.</span>
<span class="sd">            validate: If set to False the DataAction will not validate its input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">validate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_qubits_to_keep</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">qubits_to_keep</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform counts marginalization.&quot;&quot;&quot;</span>
        <span class="n">marginalized_counts</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">new_counts</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">bit_str</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">datum</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">new_counts</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">bit_str</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_qubits_to_keep</span><span class="p">])]</span> <span class="o">+=</span> <span class="n">count</span>

            <span class="n">marginalized_counts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_counts</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">marginalized_counts</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of the node.&quot;&quot;&quot;</span>
        <span class="n">options_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;qubits_to_keep=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_qubits_to_keep</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;validate=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">options_str</span><span class="si">}</span><span class="s2">)&quot;</span></div>



<div class="viewcode-block" id="Probability">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.Probability.html#qiskit_experiments.data_processing.Probability">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Probability</span><span class="p">(</span><span class="n">CountsAction</span><span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Compute the mean probability of a single measurement outcome from counts.</span>

<span class="sd">    This node returns the mean and standard deviation of a single measurement</span>
<span class="sd">    outcome probability :math:`p` estimated from the observed counts. The mean and</span>
<span class="sd">    variance are computed from the posterior Beta distribution</span>
<span class="sd">    :math:`B(\alpha_0^\prime,\alpha_1^\prime)` estimated from a Bayesian update</span>
<span class="sd">    of a prior Beta distribution :math:`B(\alpha_0, \alpha_1)` given the observed</span>
<span class="sd">    counts.</span>

<span class="sd">    The mean and variance of the Beta distribution :math:`B(\alpha_0, \alpha_1)` are:</span>

<span class="sd">    .. math::</span>

<span class="sd">        \text{E}[p] = \frac{\alpha_0}{\alpha_0 + \alpha_1}, \quad</span>
<span class="sd">        \text{Var}[p] = \frac{\text{E}[p] (1 - \text{E}[p])}{\alpha_0 + \alpha_1 + 1}</span>

<span class="sd">    Given a prior Beta distribution :math:`B(\alpha_0, \alpha_1)`, the posterior</span>
<span class="sd">    distribution for the observation of :math:`F` counts of a given</span>
<span class="sd">    outcome out of :math:`N` total shots is a</span>
<span class="sd">    :math:`B(\alpha_0^\prime,\alpha_1^\prime):math:` with</span>

<span class="sd">    .. math::</span>
<span class="sd">        \alpha_0^\prime = \alpha_0 + F, \quad</span>
<span class="sd">        \alpha_1^\prime = \alpha_1 + N - F.</span>

<span class="sd">    .. note::</span>

<span class="sd">        The default value for the prior distribution is *Jeffery&#39;s Prior*</span>
<span class="sd">        :math:`\alpha_0 = \alpha_1 = 0.5` which represents ignorance about the true</span>
<span class="sd">        probability value. Note that for this prior the mean probability estimate</span>
<span class="sd">        from a finite number of counts can never be exactly 0 or 1. The estimated</span>
<span class="sd">        mean and variance are given by</span>

<span class="sd">        .. math::</span>

<span class="sd">            \text{E}[p] = \frac{F + 0.5}{N + 1}, \quad</span>
<span class="sd">            \text{Var}[p] = \frac{\text{E}[p] (1 - \text{E}[p])}{N + 2}</span>

<span class="sd">        This node will deprecate standard error provided by the previous node.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">outcome</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">alpha_prior</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a counts to probability data conversion.</span>

<span class="sd">        Args:</span>
<span class="sd">            outcome: The bitstring for which to return the probability and variance.</span>
<span class="sd">            alpha_prior: A prior Beta distribution parameter ``[alpha0, alpha1]``.</span>
<span class="sd">                         If specified as float this will use the same value for</span>
<span class="sd">                         ``alpha0`` and ``alpha1`` (Default: 0.5).</span>
<span class="sd">            validate: If set to False the DataAction will not validate its input.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DataProcessorError: When the dimension of the prior and expected parameter vector</span>
<span class="sd">                do not match.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span> <span class="o">=</span> <span class="n">outcome</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alpha_prior</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_alpha_prior</span> <span class="o">=</span> <span class="p">[</span><span class="n">alpha_prior</span><span class="p">,</span> <span class="n">alpha_prior</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">validate</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">alpha_prior</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                    <span class="s2">&quot;Prior for probability node must be a float or pair of floats.&quot;</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_alpha_prior</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">alpha_prior</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">validate</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute mean and standard error from the beta distribution.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to process. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>
<span class="sd">                This is usually an object data type containing Python dictionaries of</span>
<span class="sd">                count data keyed on the measured bitstring.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The data that has been processed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">probabilities</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">counts_dict</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">shots</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="n">freq</span> <span class="o">=</span> <span class="n">counts_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">alpha_posterior</span> <span class="o">=</span> <span class="p">[</span><span class="n">freq</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_alpha_prior</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">shots</span> <span class="o">-</span> <span class="n">freq</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_alpha_prior</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="n">alpha_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">alpha_posterior</span><span class="p">)</span>

            <span class="n">p_mean</span> <span class="o">=</span> <span class="n">alpha_posterior</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">alpha_sum</span>
            <span class="n">p_var</span> <span class="o">=</span> <span class="n">p_mean</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">p_mean</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">alpha_sum</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

            <span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="n">invalid</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">):</span>
                <span class="c1"># Setting std_devs to NaN will trigger floating point exceptions</span>
                <span class="c1"># which we can ignore. See https://stackoverflow.com/q/75656026</span>
                <span class="n">probabilities</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">ufloat</span><span class="p">(</span><span class="n">nominal_value</span><span class="o">=</span><span class="n">p_mean</span><span class="p">,</span> <span class="n">std_dev</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">p_var</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">probabilities</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of the node.&quot;&quot;&quot;</span>
        <span class="n">options_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;validate=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;outcome=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_outcome</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;alpha_prior=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_alpha_prior</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">options_str</span><span class="si">}</span><span class="s2">)&quot;</span></div>



<div class="viewcode-block" id="BasisExpectationValue">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.BasisExpectationValue.html#qiskit_experiments.data_processing.BasisExpectationValue">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BasisExpectationValue</span><span class="p">(</span><span class="n">DataAction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute expectation value of measured basis from probability.</span>

<span class="sd">    Note:</span>
<span class="sd">        The sign becomes P(0) -&gt; 1, P(1) -&gt; -1.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format and validate the input.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to format. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The data that has been validated and formatted.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DataProcessorError: When input value is not in [0, 1]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="n">p</span> <span class="o">&lt;=</span> <span class="mf">1.0</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">data</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Input data for node </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> is not likely probability.&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute basis eigenvalue.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A data array to process. This is a single numpy array containing</span>
<span class="sd">                all circuit results input to the data processor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The data that has been processed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">-</span> <span class="n">data</span><span class="p">)</span></div>



<span class="k">class</span><span class="w"> </span><span class="nc">ProjectorType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Types of projectors for data dimensionality reduction.&quot;&quot;&quot;</span>

    <span class="n">SVD</span> <span class="o">=</span> <span class="n">SVD</span>
    <span class="n">ABS</span> <span class="o">=</span> <span class="n">ToAbs</span>
    <span class="n">REAL</span> <span class="o">=</span> <span class="n">ToReal</span>
    <span class="n">IMAG</span> <span class="o">=</span> <span class="n">ToImag</span>


<div class="viewcode-block" id="ShotOrder">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.ShotOrder.html#qiskit_experiments.data_processing.ShotOrder">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ShotOrder</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shot order allowed values.</span>

<span class="sd">    Generally, there are two possible modes in which a backend measures m</span>
<span class="sd">    circuits with n shots:</span>

<span class="sd">    - In the &quot;circuit_first&quot; mode, the backend subsequently first measures</span>
<span class="sd">      all m circuits and then repeats this n times.</span>

<span class="sd">    - In the &quot;shot_first&quot; mode, the backend first measures the 1st circuit</span>
<span class="sd">      n times, then the 2nd circuit n times, and it proceeds with the remaining</span>
<span class="sd">      circuits in the same way until it measures the m-th circuit n times.</span>

<span class="sd">    The current default mode of IBM Quantum devices is &quot;circuit_first&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># pylint: disable=invalid-name</span>
    <span class="n">circuit_first</span> <span class="o">=</span> <span class="s2">&quot;c&quot;</span>
    <span class="n">shot_first</span> <span class="o">=</span> <span class="s2">&quot;s&quot;</span></div>



<div class="viewcode-block" id="RestlessNode">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.RestlessNode.html#qiskit_experiments.data_processing.RestlessNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RestlessNode</span><span class="p">(</span><span class="n">DataAction</span><span class="p">,</span> <span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An abstract node for restless data processing nodes.</span>

<span class="sd">    In restless measurements, the qubit is not reset after each measurement. Instead, the</span>
<span class="sd">    outcome of the previous quantum non-demolition measurement is the initial state for the</span>
<span class="sd">    current circuit. Restless measurements therefore require special data processing nodes</span>
<span class="sd">    that are implemented as sub-classes of ``RestlessNode``. Restless experiments provide a</span>
<span class="sd">    fast alternative for several calibration and characterization tasks, for details</span>
<span class="sd">    see https://arxiv.org/pdf/2202.06981.pdf.</span>

<span class="sd">    This node takes as input an array of arrays (2d array) where the sub-arrays are</span>
<span class="sd">    the memories of each measured circuit. The sub-arrays therefore have a length</span>
<span class="sd">    given by the number of shots. This data is reordered into a one dimensional array where</span>
<span class="sd">    the element at index j was the jth measured shot. This node assumes by default that</span>
<span class="sd">    a list of circuits :code:`[circ_1, cric_2, ..., circ_m]` is measured :code:`n_shots`</span>
<span class="sd">    times according to the following order:</span>

<span class="sd">    .. parsed-literal::</span>

<span class="sd">        [</span>
<span class="sd">            circuit 1 - shot 1,</span>
<span class="sd">            circuit 2 - shot 1,</span>
<span class="sd">            ...</span>
<span class="sd">            circuit m - shot 1,</span>
<span class="sd">            circuit 1 - shot 2,</span>
<span class="sd">            circuit 2 - shot 2,</span>
<span class="sd">            ...</span>
<span class="sd">            circuit m - shot 2,</span>
<span class="sd">            circuit 1 - shot 3,</span>
<span class="sd">            ...</span>
<span class="sd">            circuit m - shot n,</span>
<span class="sd">        ]</span>

<span class="sd">    Once the shots have been ordered in this fashion the data can be post-processed.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@deprecate_func</span><span class="p">(</span>
        <span class="n">since</span><span class="o">=</span><span class="s2">&quot;0.9&quot;</span><span class="p">,</span>
        <span class="n">additional_msg</span><span class="o">=</span><span class="p">(</span>
            <span class="s2">&quot;Restless data processing nodes will be removed from &quot;</span>
            <span class="s2">&quot;qiskit-experiments. Refer to the RestlessMixin code of &quot;</span>
            <span class="s2">&quot;qiskit-experiment 0.8 and the code for RestlessToIQ and &quot;</span>
            <span class="s2">&quot;RestlessToCounts for the way to use a custom restless &quot;</span>
            <span class="s2">&quot;processor on an experiment.&quot;</span>
        <span class="p">),</span>
        <span class="n">package_name</span><span class="o">=</span><span class="s2">&quot;qiskit-experiments&quot;</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">memory_allocation</span><span class="p">:</span> <span class="n">ShotOrder</span> <span class="o">=</span> <span class="n">ShotOrder</span><span class="o">.</span><span class="n">circuit_first</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a restless node.</span>

<span class="sd">        Args:</span>
<span class="sd">            validate: If set to True the node will validate its input.</span>
<span class="sd">            memory_allocation: If set to &quot;c&quot; the node assumes that the backend</span>
<span class="sd">                subsequently first measures all circuits and then repeats this</span>
<span class="sd">                n times, where n is the total number of shots. The default value</span>
<span class="sd">                is &quot;c&quot;. If set to &quot;s&quot; it is assumed that the backend subsequently</span>
<span class="sd">                measures each circuit n times.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">validate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_circuits</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_memory_allocation</span> <span class="o">=</span> <span class="n">memory_allocation</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the data to an array.</span>

<span class="sd">        This node will also set all the attributes needed to process the data such as</span>
<span class="sd">        the number of shots and the number of circuits.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: An array representing the memory.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The data that has been processed.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DataProcessorError: If the datum has the wrong shape.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n_circuits</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circuits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">DataProcessorError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The datum given to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> does not convert &quot;</span>
                    <span class="s2">&quot;of an array with dimension (number of circuit, number of shots).&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_reorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unordered_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reorder the measured data according to the measurement sequence.</span>

<span class="sd">        Here, by default, it is assumed that the inner loop of the measurement</span>
<span class="sd">        is done over the circuits and the outer loop is done over the shots.</span>
<span class="sd">        The returned data is a one-dimensional array of time-ordered shots.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">unordered_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">unordered_data</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_allocation</span> <span class="o">==</span> <span class="n">ShotOrder</span><span class="o">.</span><span class="n">circuit_first</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">unordered_data</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">unordered_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span></div>



<div class="viewcode-block" id="RestlessToCounts">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.RestlessToCounts.html#qiskit_experiments.data_processing.RestlessToCounts">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RestlessToCounts</span><span class="p">(</span><span class="n">RestlessNode</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Post-process restless data and convert restless memory to counts.</span>

<span class="sd">    This node first orders the measured restless data according to the measurement</span>
<span class="sd">    sequence and then compares each bit in a shot with its value in the previous shot.</span>
<span class="sd">    If they are the same then the bit corresponds to a 0, i.e. no state change, and if</span>
<span class="sd">    they are different then the bit corresponds to a 1, i.e. there was a state change.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_qubits</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            num_qubits: The number of qubits which is needed to construct the header needed</span>
<span class="sd">                by :code:`qiskit.result.postprocess.format_counts_memory` to convert the memory</span>
<span class="sd">                into a bit-string of counts.</span>
<span class="sd">            validate: If set to False the DataAction will not validate its input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">validate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_qubits</span> <span class="o">=</span> <span class="n">num_qubits</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reorder the shots and assign values to them based on the previous outcome.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: An array representing the memory.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A counts dictionary processed according to the restless methodology.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Step 1. Reorder the data.</span>
        <span class="n">memory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reorder</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Step 2. Do the restless classification into counts.</span>
        <span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circuits</span><span class="p">)]</span>
        <span class="n">prev_shot</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_qubits</span>
        <span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;memory_slots&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_qubits</span><span class="p">}</span>

        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">shot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">memory</span><span class="p">):</span>
            <span class="n">shot</span> <span class="o">=</span> <span class="n">format_counts_memory</span><span class="p">(</span><span class="n">shot</span><span class="p">,</span> <span class="n">header</span><span class="p">)</span>

            <span class="n">restless_adjusted_shot</span> <span class="o">=</span> <span class="n">RestlessToCounts</span><span class="o">.</span><span class="n">_restless_classify</span><span class="p">(</span><span class="n">shot</span><span class="p">,</span> <span class="n">prev_shot</span><span class="p">)</span>

            <span class="n">circuit_idx</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_circuits</span>

            <span class="n">counts</span><span class="p">[</span><span class="n">circuit_idx</span><span class="p">][</span><span class="n">restless_adjusted_shot</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">prev_shot</span> <span class="o">=</span> <span class="n">shot</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">dict</span><span class="p">(</span><span class="n">counts_dict</span><span class="p">)</span> <span class="k">for</span> <span class="n">counts_dict</span> <span class="ow">in</span> <span class="n">counts</span><span class="p">])</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_restless_classify</span><span class="p">(</span><span class="n">shot</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prev_shot</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adjust the measured shot based on the previous shot.</span>

<span class="sd">        Each bit in shot is compared to its value in the previous shot. If both are equal</span>
<span class="sd">        the restless adjusted bit is 0 (no state change) otherwise it is 1 (the</span>
<span class="sd">        qubit changed state). This corresponds to taking the exclusive OR operation</span>
<span class="sd">        between each bit and its previous outcome.</span>

<span class="sd">        Args:</span>
<span class="sd">            shot: A measured shot as a binary string, e.g. &quot;0110100&quot;.</span>
<span class="sd">            prev_shot: The shot that was measured in the previous circuit.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The restless adjusted string computed by comparing the shot with the previous shot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">restless_adjusted_bits</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">bit</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">shot</span><span class="p">):</span>
            <span class="n">restless_adjusted_bits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;0&quot;</span> <span class="k">if</span> <span class="n">bit</span> <span class="o">==</span> <span class="n">prev_shot</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;1&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">restless_adjusted_bits</span><span class="p">)</span></div>



<div class="viewcode-block" id="RestlessToIQ">
<a class="viewcode-back" href="../../../stubs/qiskit_experiments.data_processing.RestlessToIQ.html#qiskit_experiments.data_processing.RestlessToIQ">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RestlessToIQ</span><span class="p">(</span><span class="n">RestlessNode</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Post-process restless data and convert restless memory to IQ data.</span>

<span class="sd">    This node first orders the measured restless IQ point (measurement level 1) data</span>
<span class="sd">    according to the measurement sequence and then subtracts an IQ point from the previous</span>
<span class="sd">    one, i.e. :math:`(I_2 - I_1) + i(Q_2 - Q_1)` for consecutively measured IQ points</span>
<span class="sd">    :math:`I_1 + iQ_1` and :math:`I_2 + iQ_2`. Following this, it takes the absolute</span>
<span class="sd">    value of the in-phase and quadrature component and returns a sequence of circuit-</span>
<span class="sd">    ordered IQ values, e.g. containing :math:`|I_2 - I_1| + i|Q_2 - Q_1|`.</span>
<span class="sd">    This procedure is based on M. Werninghaus, et al., PRX Quantum 2, 020324 (2021).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            validate: If set to False the DataAction will not validate its input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">validate</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reorder the IQ shots and assign values to them based on the previous outcome.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: An array representing the memory.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An array of arrays of IQ shots processed according to the restless methodology.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Step 1. Reorder the data.</span>
        <span class="n">memory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reorder_iq</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Step 2. Subtract and take absolute value of consecutive IQ points in</span>
        <span class="c1"># the reordered memory.</span>
        <span class="n">post_processed_memory</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">memory</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>

        <span class="c1"># The first element of the post-processed data is the first element</span>
        <span class="c1"># of the reordered memory from step 1.</span>
        <span class="n">post_processed_memory</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">post_processed_memory</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">memory</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Step 3. Order post-processed IQ points by circuit.</span>
        <span class="n">iq_memory</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circuits</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">iq_point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">post_processed_memory</span><span class="p">):</span>
            <span class="n">iq_memory</span><span class="p">[</span><span class="n">idx</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_circuits</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">iq_point</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">iq_memory</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_reorder_iq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unordered_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reorder IQ data according to the measurement sequence.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">unordered_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">unordered_data</span>

        <span class="n">ordered_data</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n_circuits</span>

        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memory_allocation</span> <span class="o">==</span> <span class="n">ShotOrder</span><span class="o">.</span><span class="n">circuit_first</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">shot_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">circ_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circuits</span><span class="p">):</span>
                    <span class="n">ordered_data</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">=</span> <span class="n">unordered_data</span><span class="p">[</span><span class="n">circ_idx</span><span class="p">][</span><span class="n">shot_idx</span><span class="p">]</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">circ_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_circuits</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">shot_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_n_shots</span><span class="p">):</span>
                    <span class="n">ordered_data</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">=</span> <span class="n">unordered_data</span><span class="p">[</span><span class="n">circ_idx</span><span class="p">][</span><span class="n">shot_idx</span><span class="p">]</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ordered_data</span><span class="p">)</span></div>

</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021-2025, Qiskit Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2025/03/08</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=a58c69eb"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>